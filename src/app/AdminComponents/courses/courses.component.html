<div class="homepage-layout">
  <div class="filter-area">
    <app-searching></app-searching>
  </div>

  <div class="scroll-container" #scrollContainer>
    @if (coursesStore.loadError()) {
      <app-error-message 
        [message]="coursesStore.loadError() || ''" 
        (retry)="onReload()"
      />
    } @else if(coursesStore.totalCourses()>0) {
      <div class="course-list">
        @for (course of coursesStore.courses(); track course.id) {
          <app-course-card 
            [course]="course" 
            mode="admin" 
            (delete)="onDeleteCourse($event)"
            [isMutating]="coursesStore.isMutating()"
          />
        }
      </div>
    }
    
    @if (coursesStore.isLoading() && coursesStore.courses().length === 0) {
      <app-loading></app-loading>
    } @else if (!coursesStore.isLoading() && coursesStore.courses().length === 0 && !coursesStore.loadError()) {
      <app-nothing-found 
        [message]="'No courses found. Try adding a new course or adjusting your search.'"
      />
    }

    @if (coursesStore.isLoadingNextPage()) {
      <app-loading></app-loading>
    }
    
    @if (!coursesStore.isLoading() && coursesStore.hasMorePages()) {
      <div #loadingTrigger></div>
    }
  </div>
</div>